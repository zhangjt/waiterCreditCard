webpackJsonp([6],{G8ye:function(t,e){},KtMa:function(t,e,o){"use strict";var a=o("Dd8w"),i=o.n(a),n=o("NYxO"),r=o("7pK0"),s={name:"HomeNav",data:function(){return{codeLabel:"获取短信验证码",count:"",verificationVal:""}},props:{phoneNumber:{type:String},captcha:{type:String},verification:{type:String}},computed:i()({},Object(n.d)({sendShow:function(t){return t.loginInfo.sendShow},btnDisable:function(t){return t.loginInfo.btnDisable}})),mounted:function(){var t=this;setTimeout(function(){t.verificationVal=""},200)},watch:{verificationVal:function(t,e){this.$emit("update:verification",t)}},methods:i()({},Object(n.c)(["SETSENDSHOW","SETBTNDISABLE"]),{getMsgCode:function(t,e){var o=this;this.$http.getMsgCode(t,e).then(function(t){if(console.log(t),"ok"===t.code){o.SETBTNDISABLE({btnDisable:!0}),o.timer||(o.count=60,o.SETSENDSHOW({sendShow:!1}),o.timer=setInterval(function(){o.count>0&&o.count<=60?o.count--:(o.SETSENDSHOW({sendShow:!0}),clearInterval(o.timer),o.codeLabel="重新发送",o.SETBTNDISABLE({btnDisable:!1}),o.timer=null)},1e3))}else o.$toast(t.msg)})},getCode:function(){var t=r.a.validatePhoneNumber(this.phoneNumber);""===t?""===this.captcha?this.$toast("请输入图片验证码"):this.getMsgCode(this.phoneNumber,this.captcha):this.$toast(t)}})},c=o("XyMi");var h=function(t){o("G8ye")},f=Object(c.a)(s,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mt-field",{staticClass:"msgCaptcha",attrs:{placeholder:"请输入短信验证码",type:"number"},model:{value:t.verificationVal,callback:function(e){t.verificationVal=e},expression:"verificationVal"}},[o("div",{staticClass:"get-captcha",attrs:{disabled:t.btnDisable},on:{click:t.getCode}},[o("span",{directives:[{name:"show",rawName:"v-show",value:t.sendShow,expression:"sendShow"}]},[t._v(t._s(t.codeLabel))]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!t.sendShow,expression:"!sendShow"}]},[t._v(t._s(t.count)+"s")])])])},[],!1,h,"data-v-1f6d4041",null);e.a=f.exports},Oijq:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("Dd8w"),i=o.n(a),n=o("NYxO"),r=o("L6bb"),s=o.n(r),c=o("idbw"),h=o("KtMa"),f=o("7pK0"),l={name:"login",components:{FormCaptcha:c.a,FormVerification:h.a},computed:{btnDisabled:{get:function(){return!this.forgetform.phoneNumber}}},data:function(){return{title:"密码修改",forgetform:{phoneNumber:localStorage.getItem("caiPhone"),captcha:"",verification:"",password:""},isFromMineSetting:!1}},created:function(){this.SETLOGINVALUE({captchaShow:!1,sendShow:!0,btnDisable:!1}),this.isFromMineSetting=this.$route.query.isFromMineSetting},mounted:function(){var t=this;setTimeout(function(){t.forgetform.password=""},200)},methods:i()({},Object(n.c)(["SETLOGINVALUE"]),{changePwd:function(t){var e=this;this.$http.resetPassword(t).then(function(t){0===t.code&&(e.$toast("密码修改成功"),e.$router.go(-1))})},checkForm:function(t){localStorage.setItem("caiPhone",this.forgetform.phoneNumber||"");var e=f.a.validatePhoneNumber(this.forgetform.phoneNumber);if(""===e)if(this.forgetform.captcha)if(this.forgetform.verification)if(this.forgetform.password)if(this.forgetform.password.length<6||this.forgetform.password.length>16)this.$toast("登录密码应设置为6-16位字符");else{var o={phone:this.forgetform.phoneNumber,password:s()(this.forgetform.password),code:this.forgetform.verification,channel:"wapzc"};this.changePwd(o)}else this.$toast("密码不能为空");else this.$toast("短信验证码不能为空");else this.$toast("图形验证码不能为空");else this.$toast(e);t.preventDefault()}})},m=o("XyMi");var u=function(t){o("o7Kz")},p=Object(m.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("mt-header",{staticClass:"boder-header",attrs:{title:t.title}},[o("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){t.$router.go(-1)}},slot:"left"})],1),t._v(" "),t._m(0),t._v(" "),o("form",{staticClass:"forget",attrs:{action:""},on:{submit:t.checkForm},model:{value:t.forgetform,callback:function(e){t.forgetform=e},expression:"forgetform"}},[o("mt-field",{attrs:{placeholder:"请输入手机号码",type:"tel"},model:{value:t.forgetform.phoneNumber,callback:function(e){t.$set(t.forgetform,"phoneNumber",e)},expression:"forgetform.phoneNumber"}}),t._v(" "),o("form-captcha",{attrs:{phoneNumber:t.forgetform.phoneNumber,captcha:t.forgetform.captcha},on:{"update:captcha":function(e){t.$set(t.forgetform,"captcha",e)}}}),t._v(" "),o("form-verification",{attrs:{phoneNumber:t.forgetform.phoneNumber,captcha:t.forgetform.captcha,verification:t.forgetform.verification},on:{"update:verification":function(e){t.$set(t.forgetform,"verification",e)}}}),t._v(" "),o("mt-field",{attrs:{placeholder:"请设置登录密码，6-16位字符",type:"password"},model:{value:t.forgetform.password,callback:function(e){t.$set(t.forgetform,"password",e)},expression:"forgetform.password"}}),t._v(" "),o("div",{staticClass:"btn-module"},[o("div",{staticClass:"btn-margin"},[o("mt-button",{staticClass:"common-btn blue",attrs:{disabled:t.btnDisabled}},[t._v("提交")])],1)])],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("form",{staticStyle:{display:"none"}},[e("input",{attrs:{type:"password"}})])}],!1,u,"data-v-2d008901",null);e.default=p.exports},T4Ww:function(t,e){},idbw:function(t,e,o){"use strict";var a=o("Dd8w"),i=o.n(a),n=o("NYxO"),r=o("7pK0"),s={name:"HomeNav",data:function(){return{codeImgSrc:"",captchaVal:""}},props:{phoneNumber:{type:String},captcha:{type:String}},computed:i()({},Object(n.d)({captchaShow:function(t){return t.loginInfo.captchaShow}})),watch:{captchaVal:function(t,e){this.$emit("update:captcha",t)}},methods:i()({},Object(n.c)(["SETCAPTCHASHOW"]),{getImgCode:function(t){var e=this;this.$http.getImageCode(t).then(function(t){e.codeImgSrc=t})},refreshCode:function(){this.getImgCode(this.phoneNumber)},getCaptcha:function(){var t=r.a.validatePhoneNumber(this.phoneNumber);""===t?(this.getImgCode(this.phoneNumber),this.SETCAPTCHASHOW({captchaShow:!0})):this.$toast(t)}})},c=o("XyMi");var h=function(t){o("T4Ww")},f=Object(c.a)(s,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mt-field",{staticClass:"imgCaptcha",attrs:{placeholder:"请输入图形验证码",type:"number"},model:{value:t.captchaVal,callback:function(e){t.captchaVal=e},expression:"captchaVal"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.captchaShow,expression:"!captchaShow"}],staticClass:"get-captcha",on:{click:t.getCaptcha}},[o("span",[t._v("获取图形验证码")])]),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:t.captchaShow,expression:"captchaShow"}],staticClass:"captcha-img",attrs:{alt:"单击图片刷新",src:t.codeImgSrc},on:{click:t.refreshCode}})])},[],!1,h,"data-v-35f4cb00",null);e.a=f.exports},o7Kz:function(t,e){}});
//# sourceMappingURL=6.feb6f093856c725fc9bb.js.map