{"version":3,"sources":["webpack:///src/components/login/FormVerification.vue","webpack:///./src/components/login/FormVerification.vue","webpack:///./src/components/login/FormVerification.vue?f40b","webpack:///src/pages/login/ForgetPassword.vue","webpack:///./src/pages/login/ForgetPassword.vue","webpack:///./src/pages/login/ForgetPassword.vue?308a","webpack:///src/components/login/FormCaptcha.vue","webpack:///./src/components/login/FormCaptcha.vue","webpack:///./src/components/login/FormCaptcha.vue?751c"],"names":["FormVerification","name","data","codeLabel","count","verificationVal","props","phoneNumber","type","String","captcha","verification","computed","extends_default","Object","vuex_esm","sendShow","state","loginInfo","btnDisable","mounted","_this","this","setTimeout","watch","newVal","oldVal","$emit","methods","getMsgCode","code","_this2","$http","then","res","SETBTNDISABLE","console","log","timer","SETSENDSHOW","setInterval","clearInterval","statusMsg","$toast","getCode","valid","validatePhoneNumber","__vue_styles__","context","__webpack_require__","Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","model","value","callback","$$v","expression","disabled","on","click","directives","rawName","_v","_s","__webpack_exports__","components","FormCaptcha","btnDisabled","get","forgetform","title","localStorage","getItem","password","isFromMineSetting","created","SETLOGINVALUE","captchaShow","$route","query","changePwd","form","resetPassword","status","$router","go","checkForm","e","setItem","phone","length","md5_default","img_code","captcha_code","preventDefault","ForgetPassword","slot","icon","$event","_m","action","submit","$set","update:captcha","update:verification","staticStyle","display","codeImgSrc","captchaVal","getImgCode","getImageCode","image","refreshCode","getCaptcha","SETCAPTCHASHOW","alt","src"],"mappings":"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","file":"static/js/7.71d1125b00f020128bef.js","sourcesContent":["<template>\r\n  <mt-field placeholder=\"请输入短信验证码\" v-model=\"verificationVal\" class=\"msgCaptcha\" type=\"number\">\r\n    <div class=\"get-captcha\" @click=\"getCode\" :disabled=\"btnDisable\">\r\n      <span v-show=\"sendShow\">{{codeLabel}}</span>\r\n      <span v-show=\"!sendShow\">{{count}}s</span>\r\n    </div>\r\n  </mt-field>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport valid from '@/modules/valid'\r\n\r\nexport default {\r\n  name: 'HomeNav',\r\n  data () {\r\n    return {\r\n      codeLabel: '获取短信验证码',\r\n      count: '',\r\n      verificationVal: ''\r\n    }\r\n  },\r\n  props: {\r\n    phoneNumber: {\r\n      type: String\r\n    },\r\n    captcha: {\r\n      type: String\r\n    },\r\n    verification: {\r\n      type: String\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      sendShow: state => state.loginInfo.sendShow,\r\n      btnDisable: state => state.loginInfo.btnDisable\r\n    })\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this.verificationVal = ''\r\n    }, 200)\r\n  },\r\n  watch: {\r\n    verificationVal (newVal, oldVal) {\r\n      // 在监听你使用update事件来更新captcha,而在父组件不需要调用该函数\r\n      this.$emit('update:verification', newVal)\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      'SETSENDSHOW', 'SETBTNDISABLE'\r\n    ]),\r\n    // 获取短信验证码\r\n    getMsgCode (phoneNumber, code) {\r\n      this.$http.getMsgCode(phoneNumber, code).then(res => {\r\n          const TIME_COUNT = 60\r\n          this.SETBTNDISABLE({btnDisable: true})\r\n          // this.btnDisable = true;\r\n            console.log(res);\r\n          if (!this.timer) {\r\n            this.count = TIME_COUNT\r\n            this.SETSENDSHOW({sendShow: false})\r\n            // this.sendShow = false;\r\n            this.timer = setInterval(() => {\r\n              if (this.count > 0 && this.count <= TIME_COUNT) {\r\n                this.count--\r\n              } else {\r\n                this.SETSENDSHOW({sendShow: true})\r\n                // this.sendShow = true;\r\n                clearInterval(this.timer)\r\n                this.codeLabel = '重新发送'\r\n                this.SETBTNDISABLE({btnDisable: false})\r\n                // this.btnDisable = false;\r\n                this.timer = null\r\n              }\r\n            }, 1000)\r\n        }\r\n        if(res.statusMsg){\r\n            this.$toast(res.statusMsg);\r\n        }\r\n      })\r\n    },\r\n    getCode () {\r\n      var res = valid.validatePhoneNumber(this.phoneNumber)\r\n      if (res === '') {\r\n        if (this.captcha === '') {\r\n          this.$toast('请输入图片验证码')\r\n        } else {\r\n          this.getMsgCode(this.phoneNumber, this.captcha)\r\n        }\r\n      } else {\r\n        this.$toast(res)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"postcss\" scoped>\r\n.home-nav-item{\r\n  width: 50%;\r\n  text-align: center;\r\n  & .icon{\r\n    background-size: contain;\r\n    display: block;\r\n    width: 40px;\r\n    height: 40px;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n.rebate{\r\n  color: #5594DF;\r\n  & .icon{\r\n    background-image: url('/static/images/fanli@2x.png');\r\n  }\r\n}\r\n.account{\r\n  color: #FF9300;\r\n  & .icon{\r\n    background-image: url('/static/images/jizhang@2x.png');\r\n  }\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/login/FormVerification.vue","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-21629bb8\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./FormVerification.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./FormVerification.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./FormVerification.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-21629bb8\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./FormVerification.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-21629bb8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/FormVerification.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mt-field',{staticClass:\"msgCaptcha\",attrs:{\"placeholder\":\"请输入短信验证码\",\"type\":\"number\"},model:{value:(_vm.verificationVal),callback:function ($$v) {_vm.verificationVal=$$v},expression:\"verificationVal\"}},[_c('div',{staticClass:\"get-captcha\",attrs:{\"disabled\":_vm.btnDisable},on:{\"click\":_vm.getCode}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sendShow),expression:\"sendShow\"}]},[_vm._v(_vm._s(_vm.codeLabel))]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sendShow),expression:\"!sendShow\"}]},[_vm._v(_vm._s(_vm.count)+\"s\")])])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-21629bb8\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login/FormVerification.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"login\">\r\n    <mt-header :title=\"title\" class=\"boder-header\">\r\n      <mt-button icon=\"back\" slot=\"left\" @click=\"$router.go(-1)\"></mt-button>\r\n    </mt-header>\r\n    <form style=\"display:none\">\r\n          <input type=\"password\"/>\r\n    </form>\r\n    <form class=\"forget\" @submit=\"checkForm\" action=\"\" v-model=\"forgetform\">\r\n      <mt-field placeholder=\"请输入手机号码\" type=\"tel\" v-model=\"forgetform.phoneNumber\"></mt-field>\r\n      <form-captcha :phoneNumber=\"forgetform.phoneNumber\" :captcha.sync=\"forgetform.captcha\"></form-captcha>\r\n      <form-verification :phoneNumber=\"forgetform.phoneNumber\" :captcha=\"forgetform.captcha\" :verification.sync=\"forgetform.verification\"></form-verification>\r\n      <mt-field placeholder=\"请设置登录密码，6-16位字符\" type=\"password\" v-model=\"forgetform.password\"></mt-field>\r\n\r\n      <div class=\"btn-module\">\r\n        <div class=\"btn-margin\">\r\n          <mt-button class=\"common-btn blue\" :disabled=\"btnDisabled\">提交</mt-button>\r\n        </div>\r\n      </div>\r\n\r\n    </form>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations } from 'vuex'\r\nimport md5 from 'md5'\r\nimport FormCaptcha from '@/components/login/FormCaptcha'\r\nimport FormVerification from '@/components/login/FormVerification'\r\nimport valid from '@/modules/valid'\r\n\r\nexport default {\r\n  name: 'login',\r\n  components: { FormCaptcha, FormVerification },\r\n  computed: {\r\n    btnDisabled: {\r\n      get: function () {\r\n        if (this.forgetform.phoneNumber) {\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      title: '密码修改',\r\n      forgetform: {\r\n        phoneNumber: localStorage.getItem('caiPhone'),\r\n        captcha: '',\r\n        verification: '',\r\n        password: ''\r\n      },\r\n      isFromMineSetting: false\r\n    }\r\n  },\r\n  created () {\r\n    this.SETLOGINVALUE({\r\n      captchaShow: false,\r\n      sendShow: true,\r\n      btnDisable: false\r\n    })\r\n    this.isFromMineSetting = this.$route.query.isFromMineSetting\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this.forgetform.password = ''\r\n    }, 200)\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      'SETLOGINVALUE'\r\n    ]),\r\n    changePwd: function (form) {\r\n      this.$http.resetPassword(form).then(res => {\r\n        if (res && res.status) {\r\n          this.$toast('密码修改成功')\r\n          this.$router.go(-1)\r\n        }\r\n      })\r\n    },\r\n    checkForm: function (e) {\r\n      localStorage.setItem('caiPhone', this.forgetform.phoneNumber || '')\r\n      var phone = valid.validatePhoneNumber(this.forgetform.phoneNumber)\r\n\r\n      if (phone === '') {\r\n        if (!this.forgetform.captcha) {\r\n          this.$toast('图形验证码不能为空')\r\n        } else if (!this.forgetform.verification) {\r\n          this.$toast('短信验证码不能为空')\r\n        } else if (!this.forgetform.password) {\r\n          this.$toast('密码不能为空')\r\n        } else if (this.forgetform.password.length < 6 || this.forgetform.password.length > 16) {\r\n          this.$toast('登录密码应设置为6-16位字符')\r\n        } else {\r\n          let form = {\r\n            phone: this.forgetform.phoneNumber,\r\n            password: md5(this.forgetform.password),\r\n            img_code: this.forgetform.captcha,\r\n            captcha_code: this.forgetform.verification,\r\n          }\r\n          this.changePwd(form)\r\n        }\r\n      } else {\r\n        this.$toast(phone)\r\n      }\r\n\r\n      e.preventDefault()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"postcss\" scoped>\r\n.login{\r\n  background-color: #FBFBFB;\r\n  & .login-form{\r\n    background-color: #fff;\r\n  }\r\n}\r\n.mint-cell{\r\n  padding-left: 15px;\r\n}\r\n.btn-margin{\r\n  margin: 75px 52px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/login/ForgetPassword.vue","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57e134a8\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ForgetPassword.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ForgetPassword.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ForgetPassword.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57e134a8\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ForgetPassword.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-57e134a8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login/ForgetPassword.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('mt-header',{staticClass:\"boder-header\",attrs:{\"title\":_vm.title}},[_c('mt-button',{attrs:{\"slot\":\"left\",\"icon\":\"back\"},on:{\"click\":function($event){_vm.$router.go(-1)}},slot:\"left\"})],1),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('form',{staticClass:\"forget\",attrs:{\"action\":\"\"},on:{\"submit\":_vm.checkForm},model:{value:(_vm.forgetform),callback:function ($$v) {_vm.forgetform=$$v},expression:\"forgetform\"}},[_c('mt-field',{attrs:{\"placeholder\":\"请输入手机号码\",\"type\":\"tel\"},model:{value:(_vm.forgetform.phoneNumber),callback:function ($$v) {_vm.$set(_vm.forgetform, \"phoneNumber\", $$v)},expression:\"forgetform.phoneNumber\"}}),_vm._v(\" \"),_c('form-captcha',{attrs:{\"phoneNumber\":_vm.forgetform.phoneNumber,\"captcha\":_vm.forgetform.captcha},on:{\"update:captcha\":function($event){_vm.$set(_vm.forgetform, \"captcha\", $event)}}}),_vm._v(\" \"),_c('form-verification',{attrs:{\"phoneNumber\":_vm.forgetform.phoneNumber,\"captcha\":_vm.forgetform.captcha,\"verification\":_vm.forgetform.verification},on:{\"update:verification\":function($event){_vm.$set(_vm.forgetform, \"verification\", $event)}}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"placeholder\":\"请设置登录密码，6-16位字符\",\"type\":\"password\"},model:{value:(_vm.forgetform.password),callback:function ($$v) {_vm.$set(_vm.forgetform, \"password\", $$v)},expression:\"forgetform.password\"}}),_vm._v(\" \"),_c('div',{staticClass:\"btn-module\"},[_c('div',{staticClass:\"btn-margin\"},[_c('mt-button',{staticClass:\"common-btn blue\",attrs:{\"disabled\":_vm.btnDisabled}},[_vm._v(\"提交\")])],1)])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticStyle:{\"display\":\"none\"}},[_c('input',{attrs:{\"type\":\"password\"}})])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-57e134a8\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/login/ForgetPassword.vue\n// module id = null\n// module chunks = ","<template>\r\n  <mt-field placeholder=\"请输入图形验证码\" v-model=\"captchaVal\" class=\"imgCaptcha\" type=\"number\">\r\n    <div v-show=\"!captchaShow\" @click=\"getCaptcha\" class=\"get-captcha\">\r\n      <span>获取图形验证码</span>\r\n    </div>\r\n    <img v-show=\"captchaShow\" alt=\"单击图片刷新\" class=\"captcha-img\" :src=\"codeImgSrc\" @click=\"refreshCode\">\r\n  </mt-field>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport valid from '@/modules/valid'\r\n\r\nexport default {\r\n  name: 'HomeNav',\r\n  data () {\r\n    return {\r\n      codeImgSrc: '',\r\n      captchaVal: ''\r\n    }\r\n  },\r\n  props: {\r\n    phoneNumber: {\r\n      type: String\r\n    },\r\n    captcha: {\r\n      type: String\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      captchaShow: state => state.loginInfo.captchaShow\r\n    })\r\n  },\r\n  watch: {\r\n    captchaVal (newVal, oldVal) {\r\n      // 在监听你使用update事件来更新captcha,而在父组件不需要调用该函数\r\n      this.$emit('update:captcha', newVal)\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      'SETCAPTCHASHOW'\r\n    ]),\r\n    // 获取图形验证码\r\n    getImgCode (phoneNumber) {\r\n      this.$http.getImageCode(phoneNumber).then(res => {\r\n        if(res.image){\r\n          this.codeImgSrc = \"data:image/png;base64,\"+res.image\r\n        }\r\n      })\r\n    },\r\n    refreshCode: function () {\r\n      this.getImgCode(this.phoneNumber)\r\n    },\r\n    getCaptcha () {\r\n      var res = valid.validatePhoneNumber(this.phoneNumber)\r\n      if (res === '') {\r\n        this.getImgCode(this.phoneNumber)\r\n        this.SETCAPTCHASHOW({captchaShow: true})\r\n      } else {\r\n        this.$toast(res)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"postcss\" scoped>\r\n.home-nav-item{\r\n  width: 50%;\r\n  text-align: center;\r\n  & .icon{\r\n    background-size: contain;\r\n    display: block;\r\n    width: 40px;\r\n    height: 40px;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n.rebate{\r\n  color: #5594DF;\r\n  & .icon{\r\n    background-image: url('/static/images/fanli@2x.png');\r\n  }\r\n}\r\n.account{\r\n  color: #FF9300;\r\n  & .icon{\r\n    background-image: url('/static/images/jizhang@2x.png');\r\n  }\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/login/FormCaptcha.vue","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7117ecb4\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./FormCaptcha.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./FormCaptcha.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./FormCaptcha.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7117ecb4\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./FormCaptcha.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7117ecb4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/FormCaptcha.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mt-field',{staticClass:\"imgCaptcha\",attrs:{\"placeholder\":\"请输入图形验证码\",\"type\":\"number\"},model:{value:(_vm.captchaVal),callback:function ($$v) {_vm.captchaVal=$$v},expression:\"captchaVal\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.captchaShow),expression:\"!captchaShow\"}],staticClass:\"get-captcha\",on:{\"click\":_vm.getCaptcha}},[_c('span',[_vm._v(\"获取图形验证码\")])]),_vm._v(\" \"),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.captchaShow),expression:\"captchaShow\"}],staticClass:\"captcha-img\",attrs:{\"alt\":\"单击图片刷新\",\"src\":_vm.codeImgSrc},on:{\"click\":_vm.refreshCode}})])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7117ecb4\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login/FormCaptcha.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}