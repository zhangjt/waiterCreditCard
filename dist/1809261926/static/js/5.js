webpackJsonp([5,12],{biZW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{dataForm:{name:"",status:""},dataList:[],pageIndex:1,pageSize:20,totalPage:0,dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1}},components:{AddOrUpdate:a("c+Ll").default},activated:function(){this.getDataList()},methods:{getDataList:function(t){var e=this;this.dataListLoading=!0,this.addOrUpdateVisible=!1,this.$http({url:this.$http.adornUrl("/bank/list"),method:"post",params:this.$http.adornParams({page:"1"==t?"1":this.pageIndex,limit:this.pageSize,name:this.dataForm.name,status:this.dataForm.status})}).then(function(t){var a=t.data;a&&0===a.code?(e.dataList=a.page.list,e.totalPage=a.page.totalNum):(e.dataList=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},selectionChangeHandle:function(t){this.dataListSelections=t},addOrUpdateHandle:function(t,e){var a=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){a.$refs.addOrUpdate.init(t,e)})},passHandle:function(){var t=this,e=this.dataListSelections.map(function(t){return t.id});e=e.join(",");var a=this.dataListSelections.map(function(t){return t.status});console.log(a);for(var r=0;r<a.length;r++)if("1"==a[r])return void this.$alert("您选择了含有展示中的记录，请先取消勾选再操作","提示",{confirmButtonText:"确定"});this.$confirm("是否确定展示?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl("/bank/updateStatus"),method:"post",data:t.$http.adornData({ids:e,status:1},!1,"form")}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataList()}}):t.$message.error(a.msg)})}).catch(function(){})},notPassHandle:function(){var t=this,e=this.dataListSelections.map(function(t){return t.id});e=e.join(",");var a=this.dataListSelections.map(function(t){return t.status});console.log(a);for(var r=0;r<a.length;r++)if("2"==a[r])return void this.$alert("您选择了含有已隐藏的记录，请先取消勾选再操作","提示",{confirmButtonText:"确定"});this.$confirm("是否确定隐藏?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl("/bank/updateStatus"),method:"post",data:t.$http.adornData({ids:e,status:2},!1,"form")}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataList()}}):t.$message.error(a.msg)})}).catch(function(){})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-user"},[t.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:t.getDataList}}):a("div",[a("el-form",{attrs:{inline:!0,model:t.dataForm},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.getDataList("1")}}},[a("el-form-item",{attrs:{label:"银行名称"}},[a("el-input",{attrs:{placeholder:"银行名称",clearable:""},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:function(e){t.getDataList("1")}},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"展示中",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已隐藏",value:"2"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getDataList("1")}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addOrUpdateHandle()}}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"success",disabled:t.dataListSelections.length<=0},on:{click:function(e){t.passHandle()}}},[t._v("展示")]),t._v(" "),a("el-button",{attrs:{type:"danger",disabled:t.dataListSelections.length<=0},on:{click:function(e){t.notPassHandle()}}},[t._v("隐藏")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"index",label:"序号","header-align":"center",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"weight","header-align":"center",align:"center",label:"排名权重"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name","header-align":"center",align:"center",label:"银行名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"icon","header-align":"center",align:"center",label:"银行icon"},scopedSlots:t._u([{key:"default",fn:function(t){return[""==t.row.icon?a("div"):a("div",[a("img",{attrs:{src:t.row.icon,alt:""}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"rebate","header-align":"center",align:"center",label:"返利金额(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("formalMoney")(e.row.rebate))+"\n      ")]}}])},[t._v("filter\n      ")]),t._v(" "),a("el-table-column",{attrs:{prop:"rebateDescription","header-align":"center",align:"center",label:"返利标识"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status","header-align":"center",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.status?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("已隐藏")]):a("el-tag",{attrs:{size:"small"}},[t._v("展示中")])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.addOrUpdateHandle(e.row.id,e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1)],1)},staticRenderFns:[]},o=a("VU/8")(r,n,!1,null,null,null);e.default=o.exports},"c+Ll":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("pltE"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addOrUpdate"},[a("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"排名权重",prop:"weight"}},[a("el-input",{attrs:{placeholder:"排名权重"},model:{value:t.dataForm.weight,callback:function(e){t.$set(t.dataForm,"weight",e)},expression:"dataForm.weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"银行名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"银行名称"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),a("el-form-item",{ref:"icon",attrs:{label:"银行icon",prop:"icon"}},[a("img-upload",{attrs:{"orgin-img":t.dataForm.icon,"img-size":t.imgSize,width:t.imgWidth,height:t.imgHeight},on:{choose:t.chooseImg}})],1),t._v(" "),a("el-form-item",{attrs:{label:"宣传语",prop:"propaganda"}},[a("el-input",{attrs:{placeholder:"宣传语",maxlength:"20"},model:{value:t.dataForm.propaganda,callback:function(e){t.$set(t.dataForm,"propaganda",e)},expression:"dataForm.propaganda"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"返利金额(元)",prop:"rebate"}},[a("el-input",{attrs:{placeholder:"返利金额(元)"},model:{value:t.dataForm.rebate,callback:function(e){t.$set(t.dataForm,"rebate",e)},expression:"dataForm.rebate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"返利标识",prop:"rebateDescription"}},[a("el-input",{attrs:{placeholder:"返利标识",maxlength:"5"},model:{value:t.dataForm.rebateDescription,callback:function(e){t.$set(t.dataForm,"rebateDescription",e)},expression:"dataForm.rebateDescription"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"银行背景颜色",size:"mini",prop:"color"}},[a("el-radio-group",{model:{value:t.dataForm.color,callback:function(e){t.$set(t.dataForm,"color",e)},expression:"dataForm.color"}},[a("el-radio",{attrs:{label:1}},[a("span",{staticClass:"myspan"})]),t._v(" "),a("el-radio",{attrs:{label:2}},[a("span",{staticClass:"myspan",staticStyle:{background:"#FF3F46"}})]),t._v(" "),a("el-radio",{attrs:{label:3}},[a("span",{staticClass:"myspan",staticStyle:{background:"#43C6CD"}})]),t._v(" "),a("el-radio",{attrs:{label:4}},[a("span",{staticClass:"myspan",staticStyle:{background:"#FF821A"}})]),t._v(" "),a("el-radio",{attrs:{label:5}},[a("span",{staticClass:"myspan",staticStyle:{background:"#6E46DD"}})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标签1",prop:"tag1"}},[a("el-input",{attrs:{placeholder:"标签1",maxlength:"8"},model:{value:t.dataForm.tag1,callback:function(e){t.$set(t.dataForm,"tag1",e)},expression:"dataForm.tag1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标签2",prop:"tag2"}},[a("el-input",{attrs:{placeholder:"标签2",maxlength:"8"},model:{value:t.dataForm.tag2,callback:function(e){t.$set(t.dataForm,"tag2",e)},expression:"dataForm.tag2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标签3",prop:"tag3"}},[a("el-input",{attrs:{placeholder:"标签3",maxlength:"8"},model:{value:t.dataForm.tag3,callback:function(e){t.$set(t.dataForm,"tag3",e)},expression:"dataForm.tag3"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类目名称",prop:"categoryName1"}},[a("el-input",{attrs:{placeholder:"类目名称"},model:{value:t.dataForm.categoryName1,callback:function(e){t.$set(t.dataForm,"categoryName1",e)},expression:"dataForm.categoryName1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"categoryContent1"}},[a("editor",{attrs:{editorCon:t.editorCon1},on:{editor:t.getEditor1}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类目名称",prop:"categoryName2"}},[a("el-input",{attrs:{placeholder:"类目名称"},model:{value:t.dataForm.categoryName2,callback:function(e){t.$set(t.dataForm,"categoryName2",e)},expression:"dataForm.categoryName2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"categoryContent2"}},[a("editor",{attrs:{editorCon:t.editorCon2},on:{editor:t.getEditor2}})],1),t._v(" "),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{placeholder:"URL"},model:{value:t.dataForm.url,callback:function(e){t.$set(t.dataForm,"url",e)},expression:"dataForm.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",size:"mini",prop:"status"}},[a("el-radio-group",{model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[a("el-radio",{attrs:{label:1}},[t._v("展示")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("隐藏")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转类型",size:"mini",prop:"inners"}},[a("el-radio-group",{model:{value:t.dataForm.inners,callback:function(e){t.$set(t.dataForm,"inners",e)},expression:"dataForm.inners"}},[a("el-radio",{attrs:{label:1}},[t._v("内链")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("外链")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-left":"20%"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.returnList()}}},[t._v("返回")])],1)],1)},staticRenderFns:[]};var o=function(t){a("qnQz")},i=a("VU/8")(r.a,n,!1,o,null,null);e.default=i.exports},pltE:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__components_Editor__=__webpack_require__("iTKD"),__WEBPACK_IMPORTED_MODULE_2__components_img_upload__=__webpack_require__("csgp"),__WEBPACK_IMPORTED_MODULE_3__utils_validate__=__webpack_require__("E4LH");__webpack_exports__.a={data:function(){return{title:null,dataForm:{id:0,weight:"",name:"",icon:"",propaganda:"",rebate:"",rebateDescription:"",color:1,tag1:"",tag2:"",tag3:"",categoryName1:"",categoryContent1:"",categoryName2:"",categoryContent2:"",url:"",status:1,inners:1},dataRule:{weight:[{required:!0,message:"排名权重不能为空",trigger:"blur"},{validator:function(t,e,a){Object(__WEBPACK_IMPORTED_MODULE_3__utils_validate__.c)(e)?a():a(new Error("您输入的排名权重不是正整数"))},trigger:"blur"}],name:[{required:!0,message:"银行名称不能为空",trigger:"blur"}],icon:[{required:!0,message:"银行icon不能为空",trigger:"blur"}],propaganda:[{required:!0,message:"宣传语不能为空",trigger:"blur"}],color:[{required:!0,message:"银行背景颜色不能为空",trigger:"blur"}],url:[{required:!0,message:"URL不能为空",trigger:"blur"}]},editorCon1:"",editorCon2:"",uploadUrl:this.$http.adornUrl("file/upload"),imgWidth:88,imgHeight:88,imgSize:200}},components:{ImgUpload:__WEBPACK_IMPORTED_MODULE_2__components_img_upload__.a,Editor:__WEBPACK_IMPORTED_MODULE_1__components_Editor__.a},methods:{chooseImg:function(t){this.dataForm.icon=t,this.$refs.icon.clearValidate(["icon"])},init:function(t,e){this.dataForm.id=t||0,this.title=this.dataForm.id?"编辑":"新增",this.dataForm.id&&(this.dataForm=e,this.dataForm.rebate=e.rebate/100,this.dataForm.color=parseInt(e.color),this.editorCon1=this.dataForm.categoryContent1,this.editorCon2=this.dataForm.categoryContent2)},returnList:function(){this.$emit("refreshDataList")},getEditor1:function(t){this.dataForm.categoryContent1=t},getEditor2:function(t){this.dataForm.categoryContent2=t},dataFormSubmit:function dataFormSubmit(){var _this=this;this.$refs.dataForm.validate(function(valid){if(valid){if(_this.dataForm.rebate<0)return void _this.$alert("您输入的返利金额不能小于0","提示",{confirmButtonText:"确定"});var params=eval("("+(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(_this.dataForm)+__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()({rebate:Math.round(100*_this.dataForm.rebate)})).replace(/}{/,",")+")");_this.$http({headers:{"Content-Type":"application/json; charset=utf-8"},url:_this.$http.adornUrl("/bank/"+(_this.dataForm.id?"update":"save")),method:"post",data:_this.$http.adornData(params,!1)}).then(function(t){var e=t.data;e&&0===e.code?_this.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){_this.$emit("refreshDataList")}}):_this.$message.error(e.msg)})}})}}}},qnQz:function(t,e,a){var r=a("yhmQ");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("201182a8",r,!0)},yhmQ:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.addOrUpdate .title {\n  font-size: 16px;\n}\n.addOrUpdate .el-form-item__content {\n  width: 50%;\n}\n.addOrUpdate .myspan {\n  background: #2371FF;\n  width: 20px;\n  height: 20px;\n  display: inline-block;\n  vertical-align: middle;\n}\n",""])}});