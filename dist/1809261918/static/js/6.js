webpackJsonp([6],{BO1k:function(t,e,a){t.exports={default:a("fxRn"),__esModule:!0}},fxRn:function(t,e,a){a("+tPU"),a("zQR9"),t.exports=a("g8Ux")},g8Ux:function(t,e,a){var i=a("77Pl"),n=a("3fs2");t.exports=a("FeBl").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},"s5+4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),n=a.n(i),s=a("woOf"),l=a.n(s),o=a("+jOk"),r=a("0xDb"),d={data:function(){return{excelUrl:"",sumFee:0,dataForm:{beginAddtime:"",endAddtime:"",beginAuditTime:"",endAuditTime:"",beginPaymentTime:"",endPaymentTime:"",auditStatus:"",isPay:"",uid:"",phone:""},auditOption:[{value:null,label:"全部"},{value:0,label:"待审核"},{value:1,label:"已通过"},{value:-1,label:"已拒绝"}],payOption:[{value:null,label:"全部"},{value:0,label:"待付款"},{value:1,label:"已付款"},{value:-1,label:"付款失败"}],applyTime:"",payTime:"",auditTime:"",dataList:[],pageIndex:1,pageSize:20,totalPage:0,dataListLoading:!1,dataListSelections:[],showDetailModule:!1}},components:{UserDetail:o.default},computed:{userName:{get:function(){return this.$store.state.user.name}}},activated:function(){this.getDataList()},methods:{setApplyTime:function(t){t?(this.dataForm.beginAddtime=Object(r.b)(t[0]),this.dataForm.endAddtime=Object(r.b)(t[1])):(this.dataForm.beginAddtime="",this.dataForm.endAddtime="")},setPayTime:function(t){t?(this.dataForm.beginPaymentTime=Object(r.b)(t[0]),this.dataForm.endPaymentTime=Object(r.b)(t[1])):(this.dataForm.beginPaymentTime="",this.dataForm.endPaymentTime="")},setAuditTime:function(t){t?(this.dataForm.beginAuditTime=Object(r.b)(t[0]),this.dataForm.endAuditTime=Object(r.b)(t[1])):(this.dataForm.beginAuditTime="",this.dataForm.endAuditTime="")},resetForm:function(){this.dataForm={beginAddtime:"",endAddtime:"",beginAuditTime:"",endAuditTime:"",beginPaymentTime:"",endPaymentTime:"",auditStatus:"",isPay:"",uid:"",phone:""},this.applyTime="",this.auditTime="",this.payTime="",this.getDataList()},getDataList:function(t){var e=this;this.dataListLoading=!0;var a={page:1===t?1:this.pageIndex,limit:this.pageSize},i=l()(a,this.dataForm);console.log(i),this.$http({url:this.$http.adornUrl("commissionPay/list"),method:"post",data:this.$http.adornData(i,!1,"form")}).then(function(t){var a=t.data;a&&0===a.code?(e.dataList=a.page.list,e.totalPage=a.page.totalNum,e.sumFee=a.sumFee):(e.dataList=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},selectionChangeHandle:function(t){this.dataListSelections=t},auditPassOrRefused:function(t,e){var a=this,i=[];if(e)i.push(e);else{i=[];this.dataListSelections.map(function(e){0!==e.audit_status&&e.audit_status!==-t||i.push(e.id)})}i.length>0?this.$confirm("确定进行["+(e?"审核":"批量审核")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={ids:i.toString(),auditStatus:t,auditAdmin:a.userName};a.$http({url:a.$http.adornUrl("commissionPay/audit"),method:"post",data:a.$http.adornData(e,!1,"form")}).then(function(t){var e=t.data;e&&0===e.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.getDataList()}}):a.$message.error(e.msg)})}).catch(function(){}):this.$message("请筛选有效数据")},payPass:function(t){var e=this,a=[];if(t)a.push(t);else{a=[];this.dataListSelections.map(function(t){1===t.audit_status&&1!==t.is_pay&&a.push(t.id)})}a.length>0?this.$confirm("确定进行["+(t?"付款":"批量付款")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={ids:a.toString(),payAdmin:e.userName};e.$http({url:e.$http.adornUrl("commissionPay/pay"),method:"post",data:e.$http.adornData(t,!1,"form")}).then(function(t){var a=t.data;a&&0===a.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getDataList()}}):e.$message.error(a.msg)})}).catch(function(){}):this.$message("请筛选有效数据")},allPay:function(){var t=this;this.$confirm("确定执行一键付款操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message("系统正在执行付款操作...");var e={payAdmin:t.userName};t.$http({url:t.$http.adornUrl("commissionPay/pay/all"),method:"post",data:t.$http.adornData(e,!1,"form")}).then(function(e){var a=e.data;if(a&&0===a.code){for(var i=[],s=0;s<a.msg.length;s++)-1===i.indexOf(a.msg[s])&&i.push(a.msg[s]);var l="",o=!0,r=!1,d=void 0;try{for(var u,c=n()(i);!(o=(u=c.next()).done);o=!0){l+=u.value}}catch(t){r=!0,d=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw d}}t.$message({message:l,type:"warning",duration:3e3,onClose:function(){t.getDataList()}})}else t.$message.error(a.msg)})}).catch(function(){})},exportExcel:function(){var t=this,e=this.$cookie.get("token"),a=this.$http.adornUrl("commissionPay/list/export");this.excelUrl=a+"?beginAddtime="+this.dataForm.beginAddtime+"&endAddtime="+this.dataForm.endAddtime+"&beginAuditTime="+this.dataForm.beginAuditTime+"&endAuditTime="+this.dataForm.endAuditTime+"&beginPaymentTime="+this.dataForm.beginPaymentTime+"&endPaymentTime="+this.dataForm.endPaymentTime+"&uid="+this.dataForm.uid+"&phone="+this.dataForm.phone+"&auditStatus="+this.dataForm.auditStatus+"&isPay="+this.dataForm.isPay+"&token="+e,this.$nextTick(function(){t.$refs.excelBtn.click()})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-user"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDetailModule,expression:"!showDetailModule"}]},[a("el-form",{ref:"dataForm",attrs:{inline:!0,model:t.dataForm},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.getDataList(1)}}},[a("el-form-item",{attrs:{label:"申请时间"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"结束时间"},on:{change:t.setApplyTime},model:{value:t.applyTime,callback:function(e){t.applyTime=e},expression:"applyTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){t.getDataList(1)}},model:{value:t.dataForm.auditStatus,callback:function(e){t.$set(t.dataForm,"auditStatus",e)},expression:"dataForm.auditStatus"}},t._l(t.auditOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{placeholder:"手机号码",clearable:""},model:{value:t.dataForm.phone,callback:function(e){t.$set(t.dataForm,"phone",e)},expression:"dataForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"付款日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"结束时间"},on:{change:t.setPayTime},model:{value:t.payTime,callback:function(e){t.payTime=e},expression:"payTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"审核日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"结束时间"},on:{change:t.setAuditTime},model:{value:t.auditTime,callback:function(e){t.auditTime=e},expression:"auditTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"付款状态"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){t.getDataList(1)}},model:{value:t.dataForm.isPay,callback:function(e){t.$set(t.dataForm,"isPay",e)},expression:"dataForm.isPay"}},t._l(t.payOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.getDataList(1)}}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm()}}},[t._v("重置")])],1)],1),t._v(" "),a("div",{staticClass:"btn-group"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.auditPassOrRefused(1)}}},[t._v("审核通过")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.auditPassOrRefused(-1)}}},[t._v("审核不通过")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){t.payPass()}}},[t._v("付款")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.allPay()}}},[t._v("一键付款")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.exportExcel()}}},[t._v("导出")]),t._v(" "),a("a",{ref:"excelBtn",staticClass:"hidden",attrs:{href:t.excelUrl,download:"提现审核列表.xlsx"}}),t._v(" "),a("span",[t._v("总计"),a("b",{staticClass:"highlight"},[t._v(t._s(t.sumFee))]),t._v("元")]),t._v(" "),a("span",[t._v("总计"),a("b",{staticClass:"highlight"},[t._v(t._s(t.totalPage))]),t._v("条")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone","header-align":"center",align:"center",label:"手机号码",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addtime","header-align":"center",align:"center",label:"申请时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fee","header-align":"center",align:"center",label:"提现金额(元)",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"audit_admin","header-align":"center",align:"center",label:"审核操作员",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"audit_time","header-align":"center",align:"center",label:"审核日期",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_admin","header-align":"center",align:"center",label:"付款操作员",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"payment_time","header-align":"center",align:"center",label:"付款日期",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content","header-align":"center",align:"center",label:"来源"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"审核操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.audit_status?a("div",[t.isAuth("user:withdrawalAudit:pass")?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.auditPassOrRefused(1,e.row.id)}}},[t._v("通过")]):t._e(),t._v(" "),t.isAuth("user:withdrawalAudit:refused")?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.auditPassOrRefused(-1,e.row.id)}}},[t._v("拒绝")]):t._e()],1):1===e.row.audit_status?a("span",{staticClass:"text-success"},[t._v("已通过")]):a("span",{staticClass:"text-danger"},[t._v("已拒绝")])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"100",label:"付款操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1===e.row.is_pay?a("div",[a("span",{staticClass:"text-danger"},[t._v("付款失败")])]):a("div",[0===e.row.audit_status?a("span",{attrs:{"text-info":""}},[t._v("待付款")]):1===e.row.audit_status?a("div",[1===e.row.is_pay?a("span",{staticClass:"text-success"},[t._v("已付款")]):a("div",[t.isAuth("user:withdrawalAudit:pay")?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.payPass(e.row.id)}}},[t._v("付款")]):t._e()],1)]):t._e()])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1),t._v(" "),a("user-detail",{directives:[{name:"show",rawName:"v-show",value:t.showDetailModule,expression:"showDetailModule"}],ref:"detailModule",on:{return:function(e){t.closeDetail()}}})],1)},staticRenderFns:[]},c=a("VU/8")(d,u,!1,null,null,null);e.default=c.exports}});